# Work Log - 2026-02-10

## 1. Initialization
- Read `/requirements.md` and identified stack and architecture constraints.
- Decided to create a Maven multi-module project with `rest` and `ui` modules.

## 2. Project scaffolding plan
- Add root `pom.xml` as aggregator and dependency management parent.
- Build `rest` as Spring Boot app with profiles, Liquibase, JWT/security starter baseline, OpenAPI starter, and initial domain/API.
- Build `ui` as Maven module that can host a React app scaffold and be managed in the same build graph.

## 3. REST module implementation
- Added Spring Boot REST service skeleton with:
  - Security + CORS baseline configuration
  - Document entity/repository/controller
  - YAML profile configuration for local/dev/uat/prod
  - Liquibase SQL changelog and initial tables (`users`, `documents`)

## 4. UI module implementation
- Added React + TypeScript + Vite starter files under `ui/`.
- Added `frontend-maven-plugin` in `ui/pom.xml` so UI lifecycle can run from Maven.

## 5. Documentation updates
- Rewrote `README.md` for new multi-module structure and run commands.
## 6. Validation
- Attempted backend tests with `mvn -pl rest test`; blocked by Maven Central access (HTTP 403) in this environment.
- Attempted UI screenshot capture via Playwright at `http://127.0.0.1:5173`; no running dev server, so screenshot was not generated.

## 7. Requirement 2.2 - Content Management iteration
- Reworked backend domain into `content` package and implemented data model for:
  - documents (+ metrics)
  - chapters/sections for book structure
  - snippets
  - media files
  - document versions (snapshots)
- Added REST APIs for document CRUD, snapshot creation/listing, chapters/sections management, snippet capture, and media metadata capture.
- Added Liquibase SQL migration `003_content_management.sql` to create missing tables and extend `documents`.
- Updated UI to a working "Content Management" screen with forms and lists for documents/snippets and snapshot action.
- Updated README with implemented scope for requirement 2.2.

## 8. Validation for iteration 2.2
- Attempted backend tests again: `mvn -pl rest test`.
  - Blocked by artifact download restriction (`403 Forbidden` from Maven Central).
- Attempted UI dependency install: `npm install` in `ui/`.
  - Blocked by registry restriction (`403 Forbidden` from registry.npmjs.org).
- Attempted Playwright screenshot at `http://127.0.0.1:5173`.
  - Failed because no frontend server could be started due blocked npm install.

## 9. Runtime conflict hotfix
- Addressed Spring startup failure caused by conflicting bean definitions between legacy `com.writeit.rest.documents.*` and new `com.writeit.rest.content.*` classes in certain runtime classpaths.
- Updated `WriteItRestApplication` to:
  - exclude component scanning of legacy `documents` package,
  - restrict `@EntityScan` to `com.writeit.rest.content`,
  - restrict `@EnableJpaRepositories` to `com.writeit.rest.content`.
- This hardens startup even if stale legacy classes exist in external build output or IDE classpath caches.

## 10. Liquibase/H2 compatibility fix
- Fixed migration `003_content_management.sql` for H2 compatibility.
- Replaced a multi-column `ALTER TABLE ... ADD COLUMN IF NOT EXISTS ..., ADD COLUMN IF NOT EXISTS ...` statement with two separate `ALTER TABLE ... ADD COLUMN IF NOT EXISTS ...;` statements.
- This resolves the reported SQL syntax error thrown during Liquibase startup on local profile.

## 11. Homepage redesign + navigation UX
- Redesigned UI homepage from basic layout to product-style landing experience.
- Added branded top navigation with logo and menu items: Home, About Us, Contact Us, Start Project.
- Added rich hero section with strong copy, metrics cards, and quick CTA buttons:
  - Start New Article
  - Start New Book
- Added product feature blocks for:
  - TOC and structure support
  - sectioned writing workflow
  - collect notes/snippets
  - version history snapshots
- Added product image section and improved overall styling with responsive CSS in `ui/src/main.css`.
- Preserved and integrated project creation/note capture workflows in a modern "Project Studio" section.
